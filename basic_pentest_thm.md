# Note Space for Basic Pentesting Room in THM
---
- Started off with nmap scan ```nmap -sV -A [IP ADDR] -T4 -vv```
- Found port 80 was open and running Apache. 8080 also open and running Apache Tomcat(?)
-- Will try to search for directories here.
- Other Open Ports: 22, 139, 445, 8009
- Used gobuster for directory enumeration ```gobuster dir -u http://[IP ADDR] -w /usr/share/wordlists/dirbuster/directory-list-2.3-small.txt```. Only found the 'development' directory.
- Going to this directory in our browser brings us to an index page with two text files. Not much but just mentions that the password J is vulnerable to being cracked easily.
- The next step is asking us to use brute-forcing to find usernames & passwords. Not sure what to do here so I watched John Hammond's vid on this room and he suggested using enum4linux. I used ```enum4linux -4`` which gave me an incorrect error message but still showed me a list of commands similar to a help page. Here I was able to locate enum4linux.
- I then ran ```enum4linux -a [IP ADDR]``` and let it run. Afterwards I was presented with 2 usernames, Jan and Kay.
- From here we need to get a password for the Jan account based on our findings earlier and we can use Hydra for this. ```hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://[IP ADDR]``` After the attack completes, we are presented with the password 'armando'.
- Using the new found login creds we can ssh into the machine we're attacking using ```ssh jan@[IP ADDR]``` followed by the password ```armando```.
- The next task asked of us is to find a way to esclate our privlege. We're gonna use linPEAS for this.
- There are a few ways to get linPEAS onto the system but let's try John H's way of using ```scp```.
- I was able to successfully copy the script over using this ```scp linpeas.sh jan@[IP ADDR]:/dev/shm/``` followed by the password when prompted.
- Now on the remote machine, if we navigate to /dev/shm our script should be there if scp worked correctly, in this case it did. While we're here lets also mark the script as executeable using ```chmod +x linpeas.sh```
- To run the script simply use ```./linpeas.sh | tee peas.txt``` I chose to pipe out to a text document cause the script gives you tons of info and its useful to store and reference later in a txt rather than viewing it in your terminal.
- I tried to view my txt in vim but it removed the color coding of the script so I tried cat but it appears to large for the THM VM. Luckily, John H's video shows what we would've found which is a private ssh key at ```/home/kay/.ssh/id_rsa```.
- Going to this directory we can read the key file so we can simply copy the rsa key to a file on our computer. Of course we have to change the permissions on the file or else ssh won't let us use it. ```chmod 600 [KEY FILE]``` should accomplish this.
- Now if we try logging in with the key file we made we'll be unsuccessful because it appears to be password protected. Luckily johntheripper has a ssh cracking ability so lets try that. ```/opt/john/ssh2john.py [KEY FILE] > forjohn.txt```. We're sending it to a file because the output it gives out will be used by john.
- Now we can try to crack the pw for the key. ```john forjohn.txt --wordlists=/usr/share/wordlists/rockyou.txt``` and from here we get the pw of ```beeswax```.
- Finally we can use this new pw to log onto the remote machine but this time using "Kay's" account ```ssh -i [KEY FILE] kay@[IP ADDR]``` and when prompted for a pw we use ```beeswax``` and we're able to log in.
- Here we can run ls to see what the user has and here we see ```pass.bak```. Running ```cat``` on this file, we are greeted with the final flag of ```heresareallystrongpasswordthatfollowsthepasswordpolicy$$```. 